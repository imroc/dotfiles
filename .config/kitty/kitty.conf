include ./theme.conf
font_family      JetBrainsMono Nerd Font Mono
font_size 14.0
modify_font cell_width 95%
# I was going crazy
# after a kitty update, font height seemed smaller, this fixed it
modify_font cell_height 5px

# =======================
# cursor
# =======================
# I'm adding these below the theme in case the theme sets them
cursor #ebfafa
cursor_text_color #0D1116
cursor_shape beam
#: The thickness of the beam cursor (in pts).
cursor_beam_thickness 1.5
#: The thickness of the underline cursor (in pts).
cursor_underline_thickness 2.0
#: The interval to blink the cursor (in seconds). Set to zero to
#: disable blinking. Negative values mean use system default. Note
#: that the minimum interval will be limited to repaint_delay.
cursor_blink_interval 0
#: Stop blinking cursor after the specified number of seconds of
#: keyboard inactivity. Set to zero to never stop blinking.
cursor_stop_blinking_after 0
cursor_trail 1
cursor_trail_decay 0.1 0.4
cursor_trail_start_threshold 0

window_padding_width 1 5 2 2
hide_window_decorations titlebar-only
confirm_os_window_close 0

# background
background_opacity 0.85
background_blur 5

# NOTE: Create a UNIX socket for remote control. This lets external scripts (like
# sketchybar) run `kitten @ --to unix:/tmp/kitty-<pid>` and retrieve titles.
# The actual socket will be created as /tmp/kitty-<pid>.
listen_on unix:/tmp/kitty

#: Process hyperlink escape sequences (OSC 8). If disabled OSC 8
#: escape sequences are ignored. Otherwise they become clickable
#: links, that you can click with the mouse or by using the hints
#: kitten <https://sw.kovidgoyal.net/kitty/kittens/hints/>. The
#: special value of ask means that kitty will ask before opening the
#: link when clicked.

# I was getting the error
# kitty sudo: sorry, you are not allowed to set the following environment variables: TERMINFO
# When running: sudo "$KANATA_BIN" --cfg "$KANATA_CFG"
# This fixed it
# https://www.reddit.com/r/KittyTerminal/comments/171j1tr/sudo_sorry_you_are_not_allowed_to_set_the/
shell_integration no-sudo

macos_option_as_alt yes
kitty_mod cmd+ctrl

# page
map cmd+u       scroll_page_up
map cmd+d       scroll_page_down

# session
map cmd+shift+n goto_session ~/.config/kitty/sessions/note.kitty-session
map cmd+shift+d goto_session ~/.config/kitty/sessions/dotfiles.kitty-session
map cmd+shift+m goto_session ~/.config/kitty/sessions/main.kitty-session
map kitty_mod+o>t goto_session ~/.config/kitty/sessions/terraform-manifests.kitty-session
map kitty_mod+o>k goto_session ~/.config/kitty/sessions/kubernetes-manifests.kitty-session
map cmd+shift+o goto_session
map cmd+shift+s save_as_session --use-foreground-process --relocatable
map cmd+shift+x close_session

# tab
tab_bar_filter session:~ or session:^$
tab_bar_edge top
tab_bar_style powerline
map cmd+shift+t new_tab_with_cwd # kitty_mod+t new_tab
map cmd+t no_op # avoid conflict with zellij
map cmd+shift+w close_tab
map cmd+shift+r     set_tab_title
map ctrl+shift+cmd+] move_tab_forward
map ctrl+shift+cmd+[ move_tab_backward
map kitty_mod+1 goto_tab 1
map kitty_mod+2 goto_tab 2
map kitty_mod+3 goto_tab 3
map kitty_mod+4 goto_tab 4
map kitty_mod+5 goto_tab 5
map kitty_mod+6 goto_tab 6
map kitty_mod+7 goto_tab 7
map kitty_mod+8 goto_tab 8
map kitty_mod+9 goto_tab 9
map cmd+shift+, goto_tab -1

# layout
map kitty_mod+] next_layout
map kitty_mod+enter goto_layout stack

# scrollback
scrollback_lines 10000
scrollback_pager ~/.local/bin/nvim --cmd 'set eventignore=FileType' --cmd 'let g:simpler_scrollback = "deeznuts"' +'nnoremap q ZQ' +'call nvim_open_term(0, {})' +'set nomodified nolist' +'$' -
map kitty_mod+i show_scrollback
map kitty_mod+g show_last_command_output

# window
map kitty_mod+w close_window
map kitty_mod+h neighboring_window left
map kitty_mod+l neighboring_window right
map kitty_mod+k neighboring_window up
map kitty_mod+j neighboring_window down
map kitty_mod+f focus_visible_window
map kitty_mod+m swap_with_window
map cmd+-  no_op
map cmd+=  no_op
map cmd+u  no_op
map ctrl+cmd+b  scroll_page_up
map ctrl+cmd+f  scroll_page_down
# cmd+enter --> kitty_mod+n
map cmd+enter no_op
map kitty_mod+n new_window
# cmd +n --> ctrl+shift+cmd+n
map cmd+n no_op
map ctrl+shift+cmd+n new_os_window

# unicode: use ctrl+cmd+space only

env read_from_shell=PATH LANG LC_* XDG_* EDITOR
