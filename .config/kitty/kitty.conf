include ./theme-tokyonight-night.conf
# include ./active-theme.conf
font_family      JetBrainsMono Nerd Font Mono
font_size 14.0
modify_font cell_width 95%
# I was going crazy
# after a kitty update, font height seemed smaller, this fixed it
modify_font cell_height 5px

# =======================
# cursor
# =======================
# I'm adding these below the theme in case the theme sets them
cursor                #04d1f9
cursor_shape beam
#: The thickness of the beam cursor (in pts).
cursor_beam_thickness 1.5
#: The thickness of the underline cursor (in pts).
cursor_underline_thickness 2.0
#: The interval to blink the cursor (in seconds). Set to zero to
#: disable blinking. Negative values mean use system default. Note
#: that the minimum interval will be limited to repaint_delay.
cursor_blink_interval 0
#: Stop blinking cursor after the specified number of seconds of
#: keyboard inactivity. Set to zero to never stop blinking.
cursor_stop_blinking_after 0
cursor_trail 1
cursor_trail_decay 0.1 0.4
cursor_trail_start_threshold 0

window_padding_width 1 5 2 2
hide_window_decorations titlebar-only
confirm_os_window_close 0

# background
background_opacity 0.85
background_blur 5

# NOTE: Create a UNIX socket for remote control. This lets external scripts (like
# sketchybar) run `kitten @ --to unix:/tmp/kitty-<pid>` and retrieve titles.
# The actual socket will be created as /tmp/kitty-<pid>.
listen_on unix:/tmp/kitty
allow_remote_control yes

#: Process hyperlink escape sequences (OSC 8). If disabled OSC 8
#: escape sequences are ignored. Otherwise they become clickable
#: links, that you can click with the mouse or by using the hints
#: kitten <https://sw.kovidgoyal.net/kitty/kittens/hints/>. The
#: special value of ask means that kitty will ask before opening the
#: link when clicked.

# I was getting the error
# kitty sudo: sorry, you are not allowed to set the following environment variables: TERMINFO
# When running: sudo "$KANATA_BIN" --cfg "$KANATA_CFG"
# This fixed it
# https://www.reddit.com/r/KittyTerminal/comments/171j1tr/sudo_sorry_you_are_not_allowed_to_set_the/
shell_integration no-sudo
shell /opt/homebrew/bin/fish --login
env read_from_shell=PATH LANG LC_* XDG_* EDITOR

macos_option_as_alt yes
kitty_mod cmd

# config
map cmd+shift+space>enter   load_config_file

# session
map cmd+shift+c goto_session ~/.config/kitty/sessions/coding.kitty-session
map cmd+shift+n goto_session ~/.config/kitty/sessions/note.kitty-session
map cmd+shift+d goto_session ~/.config/kitty/sessions/dotfiles.kitty-session
map cmd+shift+h goto_session ~/.config/kitty/sessions/home.kitty-session
map cmd+shift+i goto_session ~/.config/kitty/sessions/iac.kitty-session
map cmd+shift+y goto_session ~/.config/kitty/sessions/yamls.kitty-session
map cmd+shift+k goto_session ~/.config/kitty/sessions/kubectl.kitty-session
map cmd+shift+e goto_session ~/.config/kitty/sessions/ebook.kitty-session
map cmd+o select_tab
map cmd+shift+o goto_session
map cmd+shift+p goto_session -1
map cmd+shift+space>s save_as_session --use-foreground-process --relocatable
map cmd+shift+space>x close_session

# tab
tab_bar_filter session:~ or session:^$
tab_title_template "{index}:{title}"
tab_bar_edge top
tab_bar_style powerline
map cmd+shift+w close_tab
map cmd+r set_tab_title
map cmd+shift+[ move_tab_backward
map cmd+shift+] move_tab_forward
map cmd+t new_tab_with_cwd
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9
map cmd+p goto_tab -1
map cmd+] next_tab
map cmd+[ previous_tab

# layout
enabled_layouts splits,tall,grid,fat,horizontal,vertical,stack
map cmd+, next_layout
map cmd+enter toggle_layout stack
map cmd+shift+,>f goto_layout fat
map cmd+shift+,>h goto_layout horizontal
map cmd+shift+,>v goto_layout vertical
map cmd+shift+,>g goto_layout grid
map cmd+shift+,>s goto_layout splits
map cmd+shift+,>t goto_layout tall
map cmd+- launch --location=hsplit
map cmd+\ launch --location=vsplit

# scrollback
scrollback_lines 10000
# scrollback_pager nvim --cmd 'set eventignore=FileType' --cmd 'let g:simpler_scrollback = "deeznuts"' +'nnoremap q ZQ' +'call nvim_open_term(0, {})' +'set nomodified nolist' +'$' -
# map kitty_mod+i show_scrollback
# map kitty_mod+g show_last_command_output
# kitty-scrollback.nvim Kitten alias
action_alias kitty_scrollback_nvim kitten ~/.local/share/nvim/lazy/kitty-scrollback.nvim/python/kitty_scrollback_nvim.py --env SIMPLER_SCROLLBACK=deeznuts
# Browse scrollback buffer in nvim
map cmd+i kitty_scrollback_nvim
# Browse output of the last shell command in nvim
map cmd+g kitty_scrollback_nvim --config ksb_builtin_last_cmd_output
# Show clicked command output in nvim
mouse_map ctrl+shift+right press ungrabbed combine : mouse_select_command_output : kitty_scrollback_nvim --config ksb_builtin_last_visited_cmd_output

# window
map cmd+w close_window
map cmd+h neighboring_window left
map cmd+l neighboring_window right
map cmd+k neighboring_window up
map cmd+j neighboring_window down
map cmd+. next_window
map cmd+m swap_with_window
map cmd+b  scroll_page_up
map cmd+f  scroll_page_down
map cmd+n new_window
map cmd+shift+space>n new_os_window
map cmd+shift+space>r start_resizing_window
# map cmd+shift+a launch --type=background kitten quick-access-terminal --config ~/.config/kitty/quick-access-terminal-daily.conf --instance-group skitty-notes nvim --cmd 'let g:neovim_mode = "skitty"'  ~/dev/note/todo.md

# font reize
map shift+cmd+equal change_font_size all +2.0
map shift+cmd+minus change_font_size all -2.0
map cmd+plus no_op
map cmd+equal no_op

# disable some shortcuts to avoid conflict (mainly zellij)
map ctrl+cmd+u no_op
map ctrl+cmd+space no_op
map ctrl+cmd+, no_op
map ctrl+cmd+f no_op
map ctrl+cmd+l no_op
